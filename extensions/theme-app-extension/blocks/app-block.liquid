{% comment %}
  COD WhatsApp Interceptor App Block
  Minimal tek popup tasarÄ±m - Tailwind CSS ile
{% endcomment %}

{% if block.settings.enabled %}
  <!-- Google Fonts - Cairo -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  

  
  <!-- Shopify Analytics & Pixel Initialization -->
  <script>
    (function() {
      console.log('ğŸ¯ COD Tracking Initializing...');
      
      if (window.Shopify && window.Shopify.analytics) {
        console.log('âœ… Shopify Analytics mevcut');
      } else {
        console.log('âš ï¸ Shopify Analytics henÃ¼z yÃ¼klenmedi, bekleniyor...');
        var analyticsCheckInterval = setInterval(function() {
          if (window.Shopify && window.Shopify.analytics) {
            console.log('âœ… Shopify Analytics yÃ¼klendi');
            clearInterval(analyticsCheckInterval);
          }
        }, 100);
      }
      
      if (window.Shopify && window.Shopify.Pixel) {
        console.log('âœ… Shopify Pixel mevcut');
      } else {
        console.log('âš ï¸ Shopify Pixel henÃ¼z yÃ¼klenmedi, bekleniyor...');
        var pixelCheckInterval = setInterval(function() {
          if (window.Shopify && window.Shopify.Pixel) {
            console.log('âœ… Shopify Pixel yÃ¼klendi');
            clearInterval(pixelCheckInterval);
          }
        }, 100);
      }
      
      window.COD_APP_TRACKING = {
        enabled: true,
        version: '2.0.0',
        source: 'COD WhatsApp App - Minimal Design',
        timestamp: new Date().toISOString()
      };
      
      console.log('âœ… COD Tracking hazÄ±r');
    })();
  </script>
  
  {{ 'cod-interceptor.js' | asset_url | script_tag }}
  
  <div id="cod-interceptor-active" data-enabled="true" style="display: none;">
    <!-- Bu div interceptor'Ä±n aktif olduÄŸunu belirtir -->
  </div>
{% endif %}

{% schema %}
{
  "name": "COD WhatsApp Interceptor",
  "target": "body",
  "settings": [
    {
      "type": "checkbox",
      "id": "enabled",
      "label": "KapÄ±da Ã–deme Interceptor'Ä± Aktif Et",
      "info": "Aktif olduÄŸunda, checkout butonlarÄ± COD popup'Ä±nÄ± aÃ§acak",
      "default": true
    },
    {
      "type": "header",
      "content": "Popup AyarlarÄ±"
    },
    {
      "type": "text",
      "id": "popup_title",
      "label": "Popup BaÅŸlÄ±ÄŸÄ±",
      "default": "Sedataki Ã–deme",
      "info": "Popup'Ä±n Ã¼st kÄ±smÄ±nda gÃ¶rÃ¼necek baÅŸlÄ±k"
    },
    {
      "type": "checkbox",
      "id": "whatsapp_verification",
      "label": "WhatsApp DoÄŸrulamasÄ± Zorunlu",
      "default": true,
      "info": "Aktif olduÄŸunda mÃ¼ÅŸteriler WhatsApp ile doÄŸrulama yapmalÄ±"
    },
    {
      "type": "header",
      "content": "GeliÅŸmiÅŸ Ayarlar"
    },
    {
      "type": "checkbox",
      "id": "intercept_cart_page",
      "label": "Sepet SayfasÄ±nÄ± Yakala",
      "default": true,
      "info": "Sepet sayfasÄ±ndaki checkout butonlarÄ±nÄ± yakalar"
    },
    {
      "type": "checkbox",
      "id": "intercept_product_page",
      "label": "ÃœrÃ¼n SayfasÄ±nÄ± Yakala",
      "default": true,
      "info": "ÃœrÃ¼n sayfasÄ±ndaki 'SatÄ±n Al' butonlarÄ±nÄ± yakalar"
    },
    {
      "type": "checkbox",
      "id": "show_animations",
      "label": "AnimasyonlarÄ± GÃ¶ster",
      "default": true,
      "info": "Popup aÃ§Ä±lÄ±ÅŸ/kapanÄ±ÅŸ animasyonlarÄ±"
    }
  ]
}
{% endschema %}